# 📱 移动端访问指南

本指南将帮助你在手机上通过浏览器访问 Dishcovery 项目。

## 📋 前提条件

1. ✅ 电脑和手机连接到**同一个 WiFi 网络**
2. ✅ 后端和前端服务都已启动
3. ✅ 防火墙允许端口 5173 和 8000 的访问

---

## 🚀 启动步骤

### 1. 启动后端服务

在终端中运行：

```bash
cd backend
uvicorn main:app --reload --host 0.0.0.0
```

**注意：** 添加了 `--host 0.0.0.0` 参数，这样后端服务会监听所有网络接口，允许局域网访问。

**预期输出：**
```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
```

### 2. 启动前端服务

在**另一个终端**中运行：

```bash
cd frontend
npm run dev
```

**预期输出：**
```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: http://192.168.x.x:5173/
```

**重要：** 记下 `Network` 后面显示的 IP 地址（例如：`192.168.1.100`），这是你的电脑在局域网中的 IP 地址。

---

## 📱 在手机上访问

### 方法1：使用 Network 显示的 IP 地址

1. 确保手机和电脑连接在**同一个 WiFi 网络**
2. 在手机浏览器中访问：`http://192.168.x.x:5173`
   - 将 `192.168.x.x` 替换为启动前端时显示的 Network IP 地址
   - 例如：`http://192.168.1.100:5173`

### 方法2：查找电脑的 IP 地址

如果启动时没有显示 Network IP，可以手动查找：

**macOS/Linux:**
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

**Windows:**
```bash
ipconfig
```
查找 "IPv4 地址" 或 "inet" 后面的 IP 地址（通常是 192.168.x.x 或 10.0.x.x）

---

## ✅ 验证访问

1. 在手机浏览器中打开前端地址（如：`http://192.168.1.100:5173`）
2. 应该能看到 Dishcovery 的首页
3. 尝试上传一张菜单图片
4. 如果一切正常，应该能正常识别和显示菜品

---

## 🔧 常见问题

### 问题1：手机无法访问，显示"无法连接"

**解决方案：**
- ✅ 确认手机和电脑在同一个 WiFi 网络
- ✅ 确认后端和前端服务都在运行
- ✅ 检查防火墙设置，确保端口 5173 和 8000 没有被阻止
- ✅ 尝试在电脑浏览器访问 `http://localhost:5173` 确认服务正常

### 问题2：可以访问页面，但上传图片后报错

**解决方案：**
- ✅ 确认后端服务使用了 `--host 0.0.0.0` 参数启动
- ✅ 检查后端终端是否有错误信息
- ✅ 确认后端 CORS 配置允许所有来源（已在代码中配置）

### 问题3：页面显示正常，但样式错乱

**解决方案：**
- ✅ 清除手机浏览器缓存
- ✅ 确认 `index.html` 中有 viewport meta 标签（已配置）
- ✅ 尝试强制刷新页面

### 问题4：找不到电脑的 IP 地址

**macOS 方法：**
```bash
# 方法1：使用 ifconfig
ifconfig en0 | grep inet

# 方法2：使用系统偏好设置
# 系统偏好设置 > 网络 > 选择 WiFi > 查看 IP 地址
```

**Windows 方法：**
```bash
# 在命令提示符中运行
ipconfig
# 查找 "无线局域网适配器 WLAN" 下的 IPv4 地址
```

---

## 🔒 安全提示

⚠️ **注意：** 当前配置允许局域网内所有设备访问，仅适用于开发环境。

**生产环境建议：**
- 限制 CORS 允许的来源域名
- 使用 HTTPS
- 配置身份验证
- 限制访问 IP 范围

---

## 📝 快速启动脚本

你可以创建一个启动脚本来自动启动服务：

**start-mobile.sh (macOS/Linux):**
```bash
#!/bin/bash

# 启动后端
cd backend
uvicorn main:app --reload --host 0.0.0.0 &
BACKEND_PID=$!

# 等待后端启动
sleep 2

# 启动前端
cd ../frontend
npm run dev &
FRONTEND_PID=$!

echo "✅ 服务已启动！"
echo "后端 PID: $BACKEND_PID"
echo "前端 PID: $FRONTEND_PID"
echo ""
echo "在手机上访问: http://$(ifconfig | grep 'inet ' | grep -v 127.0.0.1 | awk '{print $2}' | head -1):5173"
echo ""
echo "按 Ctrl+C 停止服务"

# 等待用户中断
wait
```

使用方法：
```bash
chmod +x start-mobile.sh
./start-mobile.sh
```

---

## 🎉 完成！

现在你可以在手机上通过浏览器访问 Dishcovery 了！享受移动端的使用体验吧！

